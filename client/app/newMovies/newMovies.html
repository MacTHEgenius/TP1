<link rel="stylesheet" href="newMovies.css">
<div ng-controller="newMoviesController">
	<span id="serverErrorId" ng-show="showServerError" style="color:red">
		Une erreur est survenue pendant l'appel du serveur.
		<a onclick='location.reload(true); return false;'><button>Actualiser</button></a>
	</span>
	<div ng-show="showMovies">
		<div class="jumbotron">
			<h1>Films de l'annÃ©e 2016</h1>
		</div>
		<div class="row">
			<center>
				<div class="col-xs-6" ng-repeat="data in datas | limitTo:6">
          <div class="card blue">
            <!--Hello World !-->
            <span ng-if="data.Poster!='N/A'"><img ng-src="{{data.Poster}}"/></span>
            <span ng-show="data.Poster=='N/A'"><img ng-src="movie-placeholder.jpg" /></span>
            <h3>{{data.Title}}</h3>
          </div>
          <button class="btn btn-default" ng-click="showFilmComments($index)" ng-hide="showComments[$index]">Afficher</button>
          <div ng-show="showComments[$index]">
            <button class="btn btn-default" ng-click="hideFilmComments($index)">Masquer</button>
            <form name="commentForm">
              <div class="form-group">
                <h2>Leave your comment !</h2>
              </div>
              <div class="form-group">
                <textarea type="text" class="form-control" placeholder="Your message..." ng-model="newComments[$index]"></textarea>
              </div>
              <button type="submit" class="btn btn-primary" ng-click="addComment($index)">Submit</button>
            </form>
            <hr>
            <div ng-repeat="comment in comments[$index] | orderBy: '-date_created'">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <b>{{comment.user.username}}</b> at {{comment.date_created}}
                  <div class="pull-right" ng-show="myEmail == comment.user.username">
                    <span class="glyphicon glyphicon-pencil" ng-click="showEditCommentSection($parent.$index, $index)"></span>
                    <span class="glyphicon glyphicon-remove" ng-click="deleteComment($parent.$index, $index)"></span>
                  </div>
                </div>
                <div class="panel-body" ng-hide="showEditComment[$parent.$index][$index]">
                  {{comment.body}}
                </div>
                <div class="panel-body" ng-show="showEditComment[$parent.$index][$index]">
                  <form name="editCommentForm">
                    <div class="form-group">
                      <textarea type="text" class="form-control" ng-model="comment.body"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" ng-click="modifyComment($parent.$index, $index); showEditCommentSection($parent.$index, $index)">Finish</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
				</div>
			</center>
		</div>
	</div>
</div>
